<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Prevent zoom on input focus for mobile, set viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Wikipedia iOS Prototype - Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: "SF Pro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    .serif { font-family: Georgia, serif; }
    img { width: 100%; height: auto; }
    /* Prevent iOS zoom on input focus by setting font-size >= 16px */
    input[type="text"] {
      font-size: 16px !important;
    }
    /* Responsive search bar */
    @media (max-width: 600px) {
      .search-bar-container {
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
      #searchInput {
        padding-left: 2.5rem !important;
        padding-right: 2rem !important;
        font-size: 16px !important;
      }
    }
  </style>
</head>
<body class="flex items-center justify-center bg-gray-100 min-h-screen" style="min-height: 100dvh; min-height: 100vh;">
  <div class="w-full h-full bg-white shadow-lg overflow-hidden relative border border-gray-300 flex flex-col" style="height: 100dvh; height: 100vh;">
    <!--
    <div class="flex justify-between px-0 py-0 text-xs text-gray-700">
      <img src="images/status-bar.jpg" alt="status bar">
    </div>
    -->

    <!-- Search Bar -->
  <div class="px-4 flex items-center mt-2 space-x-2 search-bar-container">
      <div class="relative flex-1">
        <!-- Magnifying glass -->
        <svg xmlns="http://www.w3.org/2000/svg" 
            class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"
            fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" />
        </svg>

        <!-- Real input field -->
        <input 
          id="searchInput" 
          type="search" 
          placeholder="Search Wikipedia"
          autofocus
          enterkeyhint="search"
          class="w-full rounded-lg pl-10 pr-8 py-2 text-gray-700 focus:outline-none"
          style="background-color: rgba(120,120,128,0.12); font-size: 16px;"
        />

        <!-- Clear (x) button -->
        <button id="clearBtn" class="absolute right-2 top-1/2 -translate-y-1/2 hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-500" fill="none" 
               viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <!-- Cancel button -->
      <button id="cancelBtn" class="text-blue-600 text-sm">Cancel</button>
    </div>

    <!-- Dynamic Content -->
    <div id="contentArea" class="px-4 mt-4 flex-1 overflow-y-auto">
      <!-- Language Tabs -->
      <div class="flex space-x-2 text-sm">
        <button class="px-2 py-1 border-b-2 border-blue-600 text-blue-600">EN English</button>
        <button class="px-2 py-1 text-gray-600">PT Português</button>
        <button class="px-2 py-1 text-gray-600">ES Español</button>
        <button class="px-2 py-1 text-gray-600">More</button>
      </div>

      <!-- Recently Searched -->
      <div class="mt-4 flex justify-between items-center text-sm text-gray-600">
        <span>Recently searched</span>
        <button class="text-blue-600">Clear</button>
      </div>

      <div class="mt-2 divide-y divide-gray-200 text-sm" id="recentList">
        <div class="py-2">What are the 7 wonders of the world?</div>
        <div class="py-2">Birds</div>
        <div class="py-2">Species of cats</div>
        <div class="py-2">Can dogs eat chocolate?</div>
      </div>
    </div>
  </div>

  <script>
  window.addEventListener('DOMContentLoaded', function() {
    const input = document.getElementById("searchInput");
    if (input) {
      setTimeout(() => {
        input.focus();
        input.select();
      }, 10);
    }
  });
    const input = document.getElementById("searchInput");
    const clearBtn = document.getElementById("clearBtn");
    const cancelBtn = document.getElementById("cancelBtn");
    const contentArea = document.getElementById("contentArea");

    const results = [
  { title: "Can", subtitle: "Topics referred to by the same term", img: "images/can-disambiguationpage.jpg" },
  { title: "Canning", subtitle: "Method of preserving food.", img: "images/can-canningpage.jpg" },
  { title: "Canelo Álvarez", subtitle: "Mexican professional boxer.", img: "images/can-canelopage.jpg" },
  { title: "Can cats see in the dark?", icon: true },
  { title: "Can cats eat blueberries?", icon: true },
  { title: "Can cats eat rice?", icon: true },
  { title: "Canada post strike", icon: true },
  { title: "Canada interest rates today", icon: true },
    ];


    // Show/hide clear button
    input.addEventListener("input", () => {
      clearBtn.classList.toggle("hidden", input.value === "");
      updateContent(input.value);
    });

    // Go to results.html on Enter/Search key
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        window.location.href = "results.html";
      }
    });

    clearBtn.addEventListener("click", () => {
      input.value = "";
      clearBtn.classList.add("hidden");
      contentArea.innerHTML = ""; // clear results
    });

    cancelBtn.addEventListener("click", () => {
      window.location.href = "index.html";
    });

function updateContent(value) {
  const q = value.toLowerCase();
  if (q === "can cats" || (q.startsWith("can cats ") && q.length > 8)) {
    // Show only 'suggested searches' for 'can cats' and any extra word
    const matches = results.filter(r => r.title.toLowerCase().startsWith("can cats"));
    if (matches.length > 0) {
      contentArea.innerHTML = `
        <h2 class=\"text-gray-500 font-semibold text-sm mt-4 mb-2\">Suggested searches</h2>
        ${matches.map(match => {
          const bolded = `<span class=\"font-bold\">${match.title.slice(0, 8)}</span>${match.title.slice(8)}`;
          return `<div class=\"flex justify-between items-center border-b cursor-pointer hover:bg-gray-100\" style=\"height:44px; min-height:44px;\" onclick=\"window.location.href='results.html'\">\n  <div class=\"flex items-center h-full\">\n    <p>${bolded}</p>\n  </div>\n  <span class=\"ml-2 flex items-center h-full text-gray-800\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z\" />\n    </svg>\n  </span>\n</div>`;
        }).join("")}
      `;
    } else {
      contentArea.innerHTML = "";
    }
  } else if (q.startsWith("can")) {
    // ...existing code...
    const articles = results.filter(r => !r.icon);

    // Always show 'can cats see in the dark?' for 'can', but only show other 'can cats' for 'can cats'
    const suggestions = results.filter(r => {
      if (!r.icon) return false;
      if (r.title.toLowerCase() === 'can cats see in the dark?') return true;
      return !r.title.toLowerCase().startsWith('can cats');
    });

    // Render Wikipedia articles
    let articlesHTML = `
      <h2 class="text-gray-500 font-semibold text-sm mb-1">Top Wikipedia articles</h2>
      ${articles.map(r => `
        <div class="flex justify-between items-center border-b py-3">
          <div>
            <p><span class="font-bold">${r.title.substring(0, 3)}</span>${r.title.substring(3)}</p>
            <p class="text-sm text-gray-500">${r.subtitle || ""}</p>
          </div>
          <img src="${r.img}" alt="${r.title}" class="w-16 h-16 object-cover rounded ml-2">
        </div>
      `).join("")}
    `;

    // Render suggested searches
    let suggestionsHTML = "";
    if (suggestions.length > 0) {
      suggestionsHTML = `
        <h2 class="text-gray-500 font-semibold text-sm mt-4 mb-2">Suggested searches</h2>
        ${suggestions.map(r => `
          <div class="flex justify-between items-center border-b cursor-pointer hover:bg-gray-100" style="height:44px; min-height:44px;" onclick="window.location.href='results.html'">
            <div class="flex items-center h-full">
              <p><span class="font-bold">${r.title.substring(0, 3)}</span>${r.title.substring(3)}</p>
            </div>
            <span class="ml-2 flex items-center h-full text-gray-800">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" />
            </svg>
            </span>
          </div>
        `).join("")}
      `;
    }

    // Put both sections into contentArea
    contentArea.innerHTML = articlesHTML + suggestionsHTML;
  }
}
  </script>
</body>
</html>
